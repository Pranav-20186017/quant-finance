<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Assignment 2: Visualizing SIFMA Data using Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Assignment_SIFMA_Python_files/libs/clipboard/clipboard.min.js"></script>
<script src="Assignment_SIFMA_Python_files/libs/quarto-html/quarto.js"></script>
<script src="Assignment_SIFMA_Python_files/libs/quarto-html/popper.min.js"></script>
<script src="Assignment_SIFMA_Python_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Assignment_SIFMA_Python_files/libs/quarto-html/anchor.min.js"></script>
<link href="Assignment_SIFMA_Python_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Assignment_SIFMA_Python_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Assignment_SIFMA_Python_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Assignment_SIFMA_Python_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Assignment_SIFMA_Python_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Assignment 2: Visualizing SIFMA Data using Python</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="visualizing-the-trading-activity-and-issuance-in-the-us-securities-markets-weight-2.5" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-the-trading-activity-and-issuance-in-the-us-securities-markets-weight-2.5">Visualizing the Trading Activity and Issuance in the US Securities Markets (weight: 2.5%)</h2>
<section id="due-date-sep-18-2023---559pm." class="level4">
<h4 class="anchored" data-anchor-id="due-date-sep-18-2023---559pm.">Due Date: Sep 18, 2023 - 5:59pm.</h4>
</section>
</section>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>This assignment is a bit tedious and involves getting data from excel sheets. But the more important learning objective is for students to understand the various securities and markets and how they trend</p>
<p>The goal of this project are for the students to</p>
<pre><code>- Give more practice with simple data wrangling in Python
- Visualizing data using Python
- Understand the major securities trading the the U.S. financial markets and the market structure
- Visualize their trading and issuance activity using Python.
- Relate the trading volume to macro-economic indicators. 
- Ideally, we would relate macro news to daily or intra-day level. But in order to reduce the work for this initial assignment, I made it simple. We will work with the monthly data instead</code></pre>
</section>
<section id="required-files-for-submission" class="level1">
<h1>Required Files for Submission</h1>
<ul>
<li>One quarto qmd file or jupyter notebook that includes all the data download, wrangling and analysis</li>
<li>A html file of the report (set format: html in the markdown so that html file can be rendered)</li>
<li>Note: You <strong>do not</strong> need to submit data</li>
</ul>
</section>
<section id="data-and-analysis" class="level1">
<h1>Data and Analysis</h1>
<ul>
<li><p>Download data on <strong>monthly</strong> trading volume for various securities from the SIFMA website https://www.sifma.org/resources/archive/research/statistics/.</p>
<ol type="1">
<li>US Treasury Trading Volume</li>
<li>US GCF Repo Index, Triparty Repo, and Primary Dealer Financing (Repo/Reverse Repo)</li>
<li>US Equity Issuance and Trading Volumes</li>
<li>US Fixed Income Trading Volume</li>
<li>US SF Trading Volume</li>
<li>US Agency Trading Volume</li>
<li>US Corporate Bond Trading Volume</li>
</ol></li>
<li><p>Please note that the data has headers and footers and is not a clean format to directly ingest. It needs to be <strong>cleaned</strong> in order to be made into a tidy dataset</p></li>
<li><p>Check bootcamp session on cleaning and importing excel data using Python or ask for help from a LLM</p></li>
<li><p>Also consider writing functions and make your code more efficient and transparent</p></li>
<li><p>For all the above securities listed above (using corresponding datasets), you need to use all the columns (for eg. for treasury securities, the columns show trading volume by tenor)</p></li>
<li><p>Go to https://fred.stlouisfed.org/ and <strong>select</strong> three macro-economic indicators. You can use a R OR PYTHON package, for example, <strong>quantmod</strong> or <strong>fredapi</strong> or make use of another package or FRED API calls</p></li>
<li><p>Analysis</p>
<ul>
<li>Give a brief explanation of the three economic indicators that you chose and the rationale for selecting them</li>
<li>Compute the descriptive statistics (N, mean, p25, p50, p75, standard deviation etc.,) of the trading activity for each market</li>
<li>Plot the time-series data for SIFMA for the time period that each series is available (you can plot one graph for each market, with multiple series)</li>
<li>Do you see any patterns in the time-series? Is there any seasonality?</li>
<li>Plot the data along with each of the macro-economic indicators that you selected? Are there any patterns that you can observe? Give a brief explanation for your findings</li>
<li>What is the correlation across various securities in that particular market (say across various treasury based on tenor)?</li>
<li>What is the correlation in the trading activity across various security markets (consider the aggregate trading volume in each security market for the cross-market correlations)? Discuss your observations</li>
</ul></li>
<li><p>Download annual data for issuance statistics for</p>
<ul>
<li>US Marketable Treasury Issuance, Outstanding, and Interest Rates</li>
<li>US MBS Issuance and Outstanding</li>
<li>US ABS Issuance and Outstanding</li>
<li>US Fixed Income Issuance and Outstanding</li>
<li>US ABCP and CP Outstanding</li>
<li>US Municipal Issuance</li>
<li>US Corporate Bond Issuance</li>
</ul></li>
<li><p>Repeat step (5) for the issuance statistics</p></li>
<li><p>Plot the issuance and outstanding for each market against the trading volume in that market. Discuss your observations briefly</p></li>
<li><p>Get top 10 tokens (as of now) from Coingecko and get the longest data available for each token (it varies as some of them are recent and some of them have almost 10 years of data).</p>
<ul>
<li>for example, use the package <strong>yfinance</strong> to get data for the top 10 Crypto tokens.</li>
<li>as an example, the bitcoin price infrmation can be extracted using “BTC-USD”</li>
<li>get the date, open, close, volume for these tokens. We need only volume for now, but you will use the other price information in a future assignment</li>
</ul></li>
<li><p>Repeat step (5) for the Crypto tokens</p></li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>